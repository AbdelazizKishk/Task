<section>
  <div class="container mx-auto h-full my-4">
    <div class="flex justify-center items-center h-full">
      <div class="w-full lg:w-11/12 xl:w-11/12">
        <div class="bg-white text-black rounded-2xl shadow-lg">
          <div class="p-6 md:p-8">
            <div class="flex flex-col lg:flex-row justify-center items-center">
              <div
                class="w-full md:w-10/12 lg:w-6/12 xl:w-5/12 order-2 lg:order-1"
              >
                <p
                  class="text-center text-3xl font-bold mb-3 mx-1 md:mx-4 mt-2"
                >
                  Sign in
                </p>

                <form
                  [formGroup]="loginForm"
                  (ngSubmit)="onSubmit()"
                  class="mx-1 md:mx-4"
                >
                  <div class="flex items-center mb-4">
                    <div class="flex-grow mb-0">
                      @let usernameControl = loginForm.get('username');
                      <label class="block mb-1 font-semibold" for="username"
                        >User Name</label
                      >
                      <input
                        [ngClass]="{
                          'border-red-500':
                            usernameControl?.errors && usernameControl?.touched,
                          'border-green-500': !usernameControl?.errors
                        }"
                        type="text"
                        formControlName="username"
                        id="username"
                        class="w-full border rounded p-2 placeholder-gray-400 focus:outline-none focus:border-none focus:ring-2 focus:ring-blue-500"
                      />
                      @if (usernameControl?.errors && usernameControl?.touched)
                      {
                      <div
                        class="bg-red-100 text-red-700 p-2 mt-2 rounded"
                        role="alert"
                      >
                        @if (usernameControl?.getError('required')) {
                        <div class="mt-1 text-red-600 text-sm">
                          <small>username is required</small>
                        </div>
                        } @else if (usernameControl?.getError('username')) {
                        <div class="mt-1 text-red-600 text-sm">
                          <small>Enter a valid username</small>
                        </div>
                        }
                      </div>
                      }
                    </div>
                  </div>

                  <div class="flex items-center mb-4">
                    <div class="flex-grow mb-0">
                      @let passwordControl = loginForm.get('Password');
                      <label class="block mb-1 font-semibold" for="Password"
                        >Password</label
                      >
                      <input
                        [ngClass]="{
                          'border-red-500':
                            passwordControl?.errors && passwordControl?.touched,
                          'border-green-500': !passwordControl?.errors
                        }"
                        type="password"
                        formControlName="Password"
                        id="Password"
                        class="w-full border rounded p-2 focus:outline-none focus:border-none focus:ring-2 focus:ring-blue-500"
                      />

                      @if (passwordControl?.errors && passwordControl?.touched)
                      {
                      <div
                        class="bg-red-100 text-red-600 p-2 mt-2 rounded"
                        role="alert"
                      >
                        @if (passwordControl?.invalid &&
                        passwordControl?.touched) {
                        <div class="mt-1 text-red-600 text-sm space-y-1">
                          @if (passwordControl?.errors?.['required']) {
                          <small>Password is required.</small>
                          }
                        </div>
                        }
                      </div>
                      }
                    </div>
                  </div>
                  <div class="flex items-center justify-between mb-2">
                    <div class="flex items-center">
                      <input type="checkbox" class="mr-2" id="form2Example3c" />
                      <label for="form2Example3" class="text-sm">
                        I agree in
                        <a href="#!" class="text-blue-600 underline"
                          >Terms of Service</a
                        >
                      </label>
                    </div>
                  </div>

                  <div class="mb-3">
                    <button
                      [disabled]="loginForm.invalid"
                      type="submit"
                      class="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:bg-slate-700 transition"
                    >
                      Login @if (isLoading) {
                      <span><i class="fas fa-spin fa-spinner"></i></span>
                      }
                    </button>
                  </div>
                </form>
              </div>

              <div
                class="w-full md:w-10/12 lg:w-6/12 xl:w-7/12 flex items-center order-1 lg:order-2"
              >
                <img
                  src="/images/login.svg"
                  class="w-full"
                  alt="Sample image"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
